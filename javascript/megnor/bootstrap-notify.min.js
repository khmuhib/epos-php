!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(a){function s(t,e,s){e={content:{message:"object"==typeof e?e.message:e,title:e.title||"",icon:e.icon||"",url:e.url||"#",target:e.target||"-"}};s=a.extend(!0,{},e,s),this.settings=a.extend(!0,{},i,s),this._defaults=i,"-"==this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),this.init()}var i={element:"body",position:null,type:"info",allow_dismiss:!0,newest_on_top:!1,placement:{from:"top",align:"center"},offset:40,spacing:10,z_index:2031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){for(var t=arguments[0],e=1;e<arguments.length;e++)t=t.replace(RegExp("\\{"+(e-1)+"\\}","gm"),arguments[e]);return t},a.extend(s.prototype,{init:function(){var n=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(t,e){switch(t){case"type":this.$ele.removeClass("alert-"+n.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+n.settings.type),n.settings.type=e,this.$ele.addClass("alert-"+e).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+e);break;case"icon":var s=this.$ele.find('[data-notify="icon"]');"class"==n.settings.icon_type.toLowerCase()?s.removeClass(n.settings.content.icon).addClass(e):(s.is("img")||s.find("img"),s.attr("src",e));break;case"url":this.$ele.find('[data-notify="url"]').attr("href",e);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",e);break;default:this.$ele.find('[data-notify="'+t+'"]').html(e)}var i=this.$ele.outerHeight()+parseInt(n.settings.spacing)+parseInt(n.settings.offset.y);n.reposition(i)},close:function(){n.close()}}},buildNotify:function(){var t=this.settings.content;this.$ele=a(String.format(this.settings.template,this.settings.type,t.title,t.message,t.url,t.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),this.settings.delay<=0&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"==this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:"0px",position:"absolute",top:"0px",width:"100%",zIndex:this.settings.z_index+1}),this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},placement:function(){var t=this,e=this.settings.offset.y,s={display:"inline-block",margin:"0px auto",position:this.settings.position||("body"===this.settings.element?"fixed":"absolute"),transition:"all .5s ease-in-out",zIndex:this.settings.z_index},i=!1,n=this.settings;switch(a('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){return e=Math.max(e,parseInt(a(this).css(n.placement.from))+parseInt(a(this).outerHeight())+parseInt(n.spacing))}),1==this.settings.newest_on_top&&(e=this.settings.offset.y),s[this.settings.placement.from]=e+"px",this.settings.placement.align){case"left":case"right":s[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":s.left=0,s.right=0}this.$ele.css(s).addClass(this.settings.animate.enter),a(this.settings.element).append(this.$ele),1==this.settings.newest_on_top&&(e=parseInt(e)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(e)),a.isFunction(t.settings.onShow)&&t.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(){i=!0}).one(this.animations.end,function(){a.isFunction(t.settings.onShown)&&t.settings.onShown.call(this)}),setTimeout(function(){i||a.isFunction(t.settings.onShown)&&t.settings.onShown.call(this)},600)},bind:function(){var s,i=this;this.$ele.find('[data-notify="dismiss"]').on("click",function(){i.close()}),this.$ele.mouseover(function(){a(this).data("data-hover","true")}).mouseout(function(){a(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),0<this.settings.delay&&(i.$ele.data("notify-delay",i.settings.delay),s=setInterval(function(){var t,e=parseInt(i.$ele.data("notify-delay"))-i.settings.timer;("false"===i.$ele.data("data-hover")&&"pause"==i.settings.mouse_over||"pause"!=i.settings.mouse_over)&&(t=(i.settings.delay-e)/i.settings.delay*100,i.$ele.data("notify-delay",e),i.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",t).css("width",t+"%")),e<=-i.settings.timer&&(clearInterval(s),i.close())},i.settings.timer))},close:function(){var t=this,e=parseInt(this.$ele.css(this.settings.placement.from)),s=!1;this.$ele.data("closing","true").addClass(this.settings.animate.exit),t.reposition(e),a.isFunction(t.settings.onClose)&&t.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(){s=!0}).one(this.animations.end,function(){a(this).remove(),a.isFunction(t.settings.onClosed)&&t.settings.onClosed.call(this)}),setTimeout(function(){s||(t.$ele.remove(),t.settings.onClosed&&t.settings.onClosed(t.$ele))},600)},reposition:function(t){var e=this,s='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',i=this.$ele.nextAll(s);1==this.settings.newest_on_top&&(i=this.$ele.prevAll(s)),i.each(function(){a(this).css(e.settings.placement.from,t),t=parseInt(t)+parseInt(e.settings.spacing)+a(this).outerHeight()})}}),a.notify=function(t,e){return new s(0,t,e).notify},a.notifyDefaults=function(t){return i=a.extend(!0,{},i,t)},a.notifyClose=function(t){a(void 0===t||"all"==t?"[data-notify]":'[data-notify-position="'+t+'"]').find('[data-notify="dismiss"]').trigger("click")}});