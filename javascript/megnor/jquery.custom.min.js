!function(d){d.fn.extend({customSelect:function(e){if(void 0===document.body.style.maxHeight)return this;function o(e,s){var t=e.find(":selected"),n=s.children(":first"),e=t.html()||"&nbsp;";n.html(e),t.attr("disabled")?s.addClass(i("DisabledOption")):s.removeClass(i("DisabledOption")),setTimeout(function(){s.removeClass(i("Open")),d(document).off("mouseup."+i("Open"))},60)}var s=(e=d.extend({customClass:"customSelect",mapClass:!0,mapStyle:!0},e)).customClass,i=function(e){return s+e};return this.each(function(){var t=d(this),n=d("<span />").addClass(i("Inner")),a=d("<span />");t.after(a.append(n)),a.addClass(s),e.mapClass&&a.addClass(t.attr("class")),e.mapStyle&&a.attr("style",t.attr("style")),t.addClass("hasCustomSelect").on("update",function(){o(t,a);var e=parseInt(t.outerWidth(),10)-(parseInt(a.outerWidth(),10)-parseInt(a.width(),10));a.css({display:"inline-block"});var s=a.outerHeight();t.attr("disabled")?a.addClass(i("Disabled")):a.removeClass(i("Disabled")),n.css({width:e,display:"inline-block"}),t.css({"-webkit-appearance":"menulist-button",width:a.outerWidth(),position:"absolute",opacity:0,height:s,fontSize:a.css("font-size")})}).on("change",function(){a.addClass(i("Changed")),o(t,a)}).on("keyup",function(e){a.hasClass(i("Open"))?13!=e.which&&27!=e.which||o(t,a):(t.blur(),t.focus())}).on("mousedown",function(e){a.removeClass(i("Changed"))}).on("mouseup",function(e){a.hasClass(i("Open"))||(0<d("."+i("Open")).not(a).length&&"undefined"!=typeof InstallTrigger?t.focus():(a.addClass(i("Open")),e.stopPropagation(),d(document).one("mouseup."+i("Open"),function(e){e.target!=t.get(0)&&d.inArray(e.target,t.find("*").get())<0?t.blur():o(t,a)})))}).focus(function(){a.removeClass(i("Changed")).addClass(i("Focus"))}).blur(function(){a.removeClass(i("Focus")+" "+i("Open"))}).hover(function(){a.addClass(i("Hover"))},function(){a.removeClass(i("Hover"))}).trigger("update")})}})}(jQuery);